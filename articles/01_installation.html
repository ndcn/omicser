<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>1-Installation • omicser</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="1-Installation">
<meta property="og:description" content="omicser">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">omicser</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.9.2021-11-03</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/00_quickstart.html">0-Overview and Quickstart</a>
    </li>
    <li>
      <a href="../articles/01_installation.html">1-Installation</a>
    </li>
    <li>
      <a href="../articles/02_data_curation.html">2-Data Curation</a>
    </li>
    <li>
      <a href="../articles/03_configuration.html">3-Configuration</a>
    </li>
    <li>
      <a href="../articles/04_sharing.html">4-Launching and sharing</a>
    </li>
    <li>
      <a href="../articles/browsing.html">Browsing your data</a>
    </li>
    <li>
      <a href="../articles/multiple_databases.html">Adding multiple datasets</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ndcn/omicser/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="01_installation_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>1-Installation</h1>
            
            <h4 class="date">10/26/2021</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ndcn/omicser/blob/master/vignettes/01_installation.Rmd"><code>vignettes/01_installation.Rmd</code></a></small>
      <div class="hidden name"><code>01_installation.Rmd</code></div>

    </div>

    
    
<p>Creating and running your own browser requires both Python and R. We recommend using R to install Python and setup your environment.</p>
<blockquote>
<p>If you prefer to work on the command line, please see the troubleshooting section <a href="#command-line-installation">Command line installation</a>.</p>
</blockquote>
<p>First ensure you have <a href="https://www.r-project.org/">R</a> and <a href="https://www.rstudio.com/products/rstudio/download/">RStudio</a> installed. This project was developed using R version 4.1.0 and RStudio v1.4.1717.</p>
<div id="setting-up-r-and-python" class="section level2">
<h2 class="hasAnchor">
<a href="#setting-up-r-and-python" class="anchor"></a>Setting up R and Python</h2>
<p>First, let’s install the R tools we’ll use to create and manage our other installations:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"reticulate"</span><span class="op">)</span></code></pre></div>
<blockquote>
<p>Installing the <code>omicser</code> browser package in the next section will also install additional R packages as dependencies.</p>
</blockquote>
<p>We will use a <a href="https://conda.io/projects/conda/en/latest/user-guide/concepts/environments.html">conda environment</a> to manage the Python packages handling data on the back end of the browser application. We can use R to install <strong>Python version 3.9</strong> and other necessary Python packages by creating a conda environment using <code>reticulate</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">YOUR_CONDA_ENV</span> <span class="op">&lt;-</span> <span class="st">"omxr"</span>
<span class="va">PYTHON_VERSION</span> <span class="op">&lt;-</span> <span class="fl">3.9</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/reticulate">reticulate</a></span><span class="op">)</span>
<span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reticulate/man/install_miniconda.html">install_miniconda</a></span><span class="op">(</span><span class="op">)</span> 
<span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reticulate/man/conda-tools.html">conda_create</a></span><span class="op">(</span><span class="va">YOUR_CONDA_ENV</span>, python_version <span class="op">=</span> <span class="va">PYTHON_VERSION</span><span class="op">)</span></code></pre></div>
<p>We’ll now install Python packages into this conda environment that are required in the example scripts used later in this tutorial. Please note that if you have bioconductor configured as a channel it may cause problems. Forcing install from the “conda-forge” channel is preferred:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reticulate/man/conda-tools.html">conda_install</a></span><span class="op">(</span>envname<span class="op">=</span> <span class="va">YOUR_CONDA_ENV</span>,
                          channel <span class="op">=</span> <span class="st">"conda-forge"</span>,
                          packages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"scanpy"</span>, <span class="st">"leidenalg"</span><span class="op">)</span> <span class="op">)</span></code></pre></div>
</div>
<div id="installing-omicser" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-omicser" class="anchor"></a>Installing <code>omicser</code>
</h2>
<p>Now that we’ve set up our environment, we can install the package from which we’ll build the browser application. We want to receive the most up-to-date version of the package possible, so we’ll install the current code from GitHub using the <code>devtools</code> package:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ndcn/omicser"</span><span class="op">)</span></code></pre></div>
<p>We are relying on this command to install not only the <code>omicser</code> package, but a large number of additional packages that will support data formatting and app development. If you are prompted to install and/or update any of these packages, we recommend you do so.</p>
<blockquote>
<p>If you receive a message indicating a package failed to install (resulting in a failure to install <code>omicser</code>), please see the troubleshooting section <a href="#r-packages-failing-to-load">R packages failing to load</a>.</p>
</blockquote>
<p>If you have successfully complete all steps in this section, you are now ready for <a href="02_data_curation.html">data curation</a>.</p>
</div>
<div id="troubleshooting" class="section level2">
<h2 class="hasAnchor">
<a href="#troubleshooting" class="anchor"></a>Troubleshooting</h2>
<div id="command-line-installation" class="section level3">
<h3 class="hasAnchor">
<a href="#command-line-installation" class="anchor"></a>Command line installation</h3>
<p>If you have difficulty installing Miniconda via R, or prefer to work on the command line, the following instructions demonstrate how to use the shell to set up your environment (examples for MacOSX).</p>
<p>First, download and install Miniconda:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1"></a><span class="ex">curl</span> https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.sh -o ~/miniconda.sh</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="fu">bash</span> ~/miniconda.sh -p <span class="va">$HOME</span>/miniconda</span></code></pre></div>
<p>You may need to respond to some prompts in your Console to complete this installation.</p>
<p>Now we can use conda to install a python 3.9 environment to use with <code>reticulate</code>. Installing the python packages <code>scanpy</code> and <code>leidenalg</code> will ensure all additional python requirements are installed:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1"></a><span class="ex">conda</span> create -n omxr python=3.9</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="ex">conda</span> install -c conda-forge scanpy leidenalg                                                                       </span></code></pre></div>
<p>Note that we do not use <code>conda activate</code> to load the environment. Because we’ll be working in R, we recommend loading the environment through R (see next section for more information). Please also remember to install <code>devtools</code> and <code>reticulate</code>.</p>
</div>
<div id="reticulate-and-conda" class="section level3">
<h3 class="hasAnchor">
<a href="#reticulate-and-conda" class="anchor"></a><code>reticulate</code> and <code>conda</code>
</h3>
<p>If you have difficulty loading <code>scanpy</code> (e.g., “ModuleNotFoundError: No module named ‘scanpy’”), you can check the details of your Python environment:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reticulate/man/py_discover_config.html">py_discover_config</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Because you used <code>reticulate</code> to create an environment for you with the relevant packages installed, you should see your environment name (“omxr”) listed in the Python paths (e.g., <code>r-miniconda/envs/omxr/bin/python</code>).</p>
<p>If you do not see your environment listed in the paths, you can load your environment:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/reticulate/man/use_python.html">use_condaenv</a></span><span class="op">(</span>condaenv <span class="op">=</span> <span class="st">"omxr"</span>, required <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>This may also require you to restart your R session. For more information, please see the <a href="https://rstudio.github.io/reticulate/index.html"><code>reticulate</code> website</a></p>
</div>
<div id="r-packages-failing-to-load" class="section level3">
<h3 class="hasAnchor">
<a href="#r-packages-failing-to-load" class="anchor"></a>R packages failing to load</h3>
<p>If you receive output in your console indicating one of these additional packages did not install correctly, you can manually install it. This may also be necessary in a later step of this series of tutorials, if you realize a function and/or package are not available.</p>
<p>For example, the download for <code>vroom</code> may have stalled, resulting in an error in your console saying the package isn’t available. You can install this package alone using the Packages interface in RStudio, or using the following code:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"vroom"</span><span class="op">)</span></code></pre></div>
<p>You may need to reinstall and/or reload other packages as well (if they are dependent on the package you manually installed).</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Andy Henrie.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
